version: '{build}'
clone_folder: c:\projects\cidssh
image:
    - Visual Studio 2019
configuration:
    - Debug
    - Release
platform:
    - x64
environment:
  matrix:
      - arch: Win32
matrix:
  fast_finish: true

# skip unsupported combinations
init:
    - echo %APPVEYOR_BUILD_WORKER_IMAGE%
    - if "%APPVEYOR_BUILD_WORKER_IMAGE%"=="Visual Studio 2019" ( set generator="Visual Studio 16 2019" )
    - if "%APPVEYOR_BUILD_WORKER_IMAGE%"=="Visual Studio 2017" ( set generator="Visual Studio 15 2017" )
    - if "%APPVEYOR_BUILD_WORKER_IMAGE%"=="Visual Studio 2015" ( set generator="Visual Studio 14 2015" )
    - if "%APPVEYOR_BUILD_WORKER_IMAGE%"=="Visual Studio 2013" ( set generator="Visual Studio 12 2013" )
    - echo %generator%

build: off

test_script:
    - cmd: |-
        git submodule update --init --recursive
        mkdir build
        cd build
        cmake --version
        cmake .. -G %generator% -A %arch%
        cmake --build c:\projects\cidssh --config %CONFIGURATION%
